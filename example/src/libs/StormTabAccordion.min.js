!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.StormTabAccordion=i()}(this,function(){"use strict";function t(t,i){this.settings=STORM.UTILS.merge({},e,i),this.tabs=[].slice.call(t.querySelectorAll(this.settings.tabClass)),this.titles=[].slice.call(t.querySelectorAll(this.settings.titleClass)),this.targets=this.tabs.map(function(t){return document.getElementById(t.getAttribute("href").substr(1))}),this.current=0,this.initAria(),this.initTabs(),this.initTitles()}function i(i,e){if(!("querySelectorAll"in document))throw new Error("TabAccordion cannot be initialised");var s=[];return[].slice.call(document.querySelectorAll(i)).forEach(function(i){s.push(new t(i,e))}),s}var e={delay:200,breakpoint:1009,tabClass:".js-tab-accordion-tab",titleClass:".js-tab-accordion-title",currentClass:"active"};return t.prototype.initAria=function(){return this.tabs.forEach(function(t){STORM.UTILS.attributelist.add(t,{role:"tab","aria-controls":t.getAttribute("href").substr(1)})}),this.targets.forEach(function(t){STORM.UTILS.attributelist.add(t,{role:"tabpanel","aria-hidden":!0,tabIndex:"-1"})}),this},t.prototype.initTabs=function(){return this.tabs.forEach(function(t,i){t.addEventListener("click",function(t){t.preventDefault(),this.toggle(i)}.bind(this),!1)}.bind(this)),this},t.prototype.initTitles=function(){var t=function(t){return t===this.current?!1:void this.toggle(t)};return this.titles.forEach(function(i,e){i.addEventListener("click",function(i){i.preventDefault(),t.call(this,e)}.bind(this),!1)}.bind(this)),this},t.prototype.open=function(t){return STORM.UTILS.classlist.add(this.targets[t],this.settings.currentClass),STORM.UTILS.classlist.add(this.tabs[t],this.settings.currentClass),STORM.UTILS.attributelist.toggle(this.targets[t],"aria-hidden"),STORM.UTILS.attributelist.add(this.targets[t],{tabIndex:"0"}),STORM.UTILS.attributelist.add(this.tabs[t],{"aria-selected":!0}),this.current=t,this},t.prototype.close=function(t){return STORM.UTILS.classlist.remove(this.targets[this.current],this.settings.currentClass),STORM.UTILS.classlist.remove(this.tabs[this.current],this.settings.currentClass),STORM.UTILS.attributelist.toggle(this.targets[this.current],"aria-hidden"),STORM.UTILS.attributelist.add(this.targets[this.current],{tabIndex:"-1"}),STORM.UTILS.attributelist.add(this.tabs[this.current],{"aria-selected":null}),this},t.prototype.toggle=function(t){return this.current!==t?(this.close(t).open(t),this):void 0},{init:i}});